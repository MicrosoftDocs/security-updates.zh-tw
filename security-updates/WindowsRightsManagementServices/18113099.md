---
TOCTitle: RMS Active Directory 快取
Title: RMS Active Directory 快取
ms:assetid: 'c721a2eb-2fe9-4346-b426-3cc169b97265'
ms:contentKeyID: 18113099
ms:mtpsurl: 'https://technet.microsoft.com/zh-tw/library/Cc747662(v=WS.10)'
---

RMS Active Directory 快取
=========================

每個 RMS 根憑證伺服器或叢集以及授權伺服器都具有一個本機 Active Directory 快取，其中包含 Active Directory 通用類別目錄群組成員資格查詢結果。除了每台伺服器中的快取之外，每個叢集還有一個共用快取，該快取儲存在目錄服務資料庫中。這些快取的用途是為了減少送交到通用類別目錄的查詢數目，並縮短授權要求的回應時間。

使用者要求使用授權時，回應的伺服器必須評估該使用者是否已被授與發行授權的必要權限。在最簡單的情況中，要求授權的使用者在發行授權中會被明確命名。不過在許多情況下，作者寧願將權限授與群組，而不願授與個別使用者。

如果發行授權沒有明確名命要求的使用者，而授與權限給群組，則伺服器必須評估使用者的群組成員資格，判定使用者是否是已經授與權限的群組成員之一。若是要這樣做，伺服器會對通用類別目錄送出 LDAP 查詢。

RMS 伺服器可以快取本機 Active Directory 快取和叢集目錄服務資料庫中的所有群組成員資格查詢結果。接著伺服器可以從這些快取中獲得群組成員資格的資訊，減少必須送出到通用類別目錄的查詢數。根據預設值，會先查詢最近的伺服器；您也可以設定 GC 登錄機碼，以指定要查詢的通用類別目錄伺服器。如需關於此設定的詳細資訊，請參閱本文件集內＜操作 RMS 伺服器＞一節中的＜修改連線集區登錄設定＞。

若要評估使用者的群組成員資格，伺服器必須先檢查其快取，看看裏面是否已儲存了使用者的群組成員資格資訊。如果沒有，伺服器就會接著檢查叢集的目錄服務資料庫。如果群組成員資格資訊沒有儲存於此資料庫內，伺服器會接著查詢通用類別目錄。

對於使用者和群組，會快取下列 Active Directory 屬性：

-   mail
-   ProxyAddresses (僅 SMTP 電子郵件地址)
-   objectSID
-   sidHistory
-   memberOf (使用者或群組所屬的群組的 GUID)

本機 Active Directory 快取中的項目有時間戳記。註冊設定會指定快取中項目的有效期間，以及可以快取的項目總數。這些設定可影響伺服器效能。如需詳細資訊，請參閱本文件集內＜操作 RMS 伺服器＞一節中的＜修改 Active Directory 快取設定＞。