---
TOCTitle: Issues with Setup
Title: Issues with Setup
ms:assetid: 'c1c07604-2fca-4410-81f6-c02d2fb5c314'
ms:contentKeyID: 18126301
ms:mtpsurl: 'https://technet.microsoft.com/zh-tw/library/Cc708547(v=WS.10)'
---

Issues with Setup
=================

If you are having trouble installing WSUS, use the following information to troubleshoot the problem.

Troubleshooting WSUS setup
--------------------------

#### Check for required software and hardware

WSUS has a number of requirements that need to be met before installation. For more information, see [Deploying Microsoft Windows Server Update Services](https://go.microsoft.com/fwlink/?linkid=79983) (https://go.microsoft.com/fwlink/?linkid=79983).

#### Check setup logs

WSUS setup creates the following four log files that can help you diagnose problems with setup. These log files are located in the %temp% directory of the user who ran the installation process.

-   WSUSSetup.log: The status of each of the component installations performed during WSUS setup is logged to this file. You can check this log to see whether any of the component installations failed. If you see a failure, you can check the corresponding log to see what went wrong during the installation of that component.
-   WSUSSetupMsi\_*timestamp*.log: This log file is generated by MSI for WSUS component setup. Windows installer, before invoking any of the custom actions and standard actions, logs that information to this file. The return values from the custom actions are logged to this file as well. This log file is useful if there are errors invoking any of the custom actions.
-   WSUSCa\_*timestamp*.log: This log file is used by custom actions. Errors that occurred while executing any of the custom actions in WSUS component or BITS setup are logged to this file.
-   WSUSWyukonSetup\_*timestamp*.log: This is the log file for Windows Internal Database setup. All Windows Internal Database installation/uninstallation information is logged to this file.

#### Check the .NET framework installation

If the .NET framework has not been installed correctly, WSUS setup may fail.

-   One symptom of this is the failure to run HideConsoleApp.exe. Search WSUSSetupMsi\_*timestamp*.log file for "HideConsoleApp.exe" and look at the return value of the corresponding custom action. If the return value is non-zero, the executable failed to run. Note that HideConsoleApp.exe may fail because of several other reasons. The MSUSCa\_*timestamp*.log file will give the specific reason it failed.
-   Reinstalling .NET framework may solve this problem.

#### The WSUSService service is marked for deletion

WSUS installs the WSUSService service during setup and deletes it during uninstallation. During uninstallation, if some other process is using the service, the service is not deleted completely but is marked for deletion. It is deleted only after all processes have stopped using the service. If the service is not deleted properly after uninstallation, then the next installation may fail, because WSUSService cannot be installed while it is marked for deletion.

-   Look at the WSUSSetupMsi\_*timestamp*.log file for the return value of HideConsoleApp.exe. If the return value is not zero, that means that the custom action running HideConsoleApp.exe failed.
-   Look at the WSUSCa\_*timestamp*.log file to see whether the failure is due to the service being marked for deletion.
-   Reboot the machine and rerun setup. All the open handles to the service are closed when the machine shuts down, and this should resolve the problem.

#### On a domain controller, the NetBiosDomainName is different from the DNS domain name

Setup can fail because it uses the DNS domain name instead of the NetBiosDomainName when setting database permissions to the IWAM account.

-   Check the NetBiosDomainName and the DNS domain name on the machine. These names must be identical for WSUS setup to succeed.

#### Duplicate ASP.Net entries in the IIS Web services list

The ASP.Net Web service extension may occasionally be listed twice in the IIS configuration. If this is the case, WSUS setup will fail when it tries to install and configure its v-roots.

-   Check WSUSSetup.log for the following entry:

    ```
    Error IISCustomAction Command /Install FailedSystem.ArgumentException: Item has already been added. Key in dictionary: "enableasp.net"  Key being added: "enableasp.net"
    ```

-   Disable and then reenable the ASP.NET V2.0.50727 Web service extension through the IIS UI. Make sure that the final status of this Web service extension is “allowed.”

#### There is a SUSDB database from an earlier installation

Reinstallation of WSUS can fail if there is a SUSDB database from a previous WSUS installation. You will need to remove this database before restarting WSUS setup.

#### UseCustomWebsite fails when the default Web site does not have a site ID of 1

If the default Web site has been deleted and recreated, the default Web site will get assigned a Web site ID other than 1 by IIS. Consequently, WSUS Setup at the default Web site will fail. There are two ways you can work around this issue:

-   Reinstall IIS in order to ensure the default Web site is created with a Web site index.
-   WSUS Setup will still work if installed to port 8530. Check if the value of **usecustomwebsite** value is set to **on**.

#### API compression may not be used after installing WSUS 3.0 SP1 on Windows Server 2008

If you want to use API compression on Windows 2008 ensure that dynamic compression IIS role service is installed. This feature is not installed in the default IIS installation on Windows Server 2008.

#### WSUS 3.0 SP1 setup fails to install to Windows Server 2008 when installing to a case-sensitive SQL and the computer name is in lowercase letters

SQL requires the computer name to be in uppercase letters. Rename the computer using all uppercase letters.
